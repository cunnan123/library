<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>策略模式</title>
    <script src="./CashClass.js"></script>
    <script src="./NormalCashClass.js"></script>
    <script src="./RebateCashClass.js"></script>
    <script src="./ReturnCashClass.js"></script>
    <script src="./CashFactory.js"></script>
    <script src="./ContextCashClass.js"></script>
</head>

<body>
    促销方式：<select id="selectMode">
        <option>正常收费</option>
        <option>满500反100</option>
        <option>打8折</option>
    </select><br>
    商品价格：<input type="text" id="price" placeholder="0"><br>
    商品数量：<input type="text" id="num" placeholder="0"><br>
    <button style="color:red;" id="button">计算</button><br>
    商品总价：<div id="totalPrice"></div>
    总共支付：<div id="allPrice"></div>
    <script>
        // // 简单工厂模式
        // var proLists = ''
        // var allProPrice = 0;
        // button.onclick = function () {
        //     var prices = price.value * num.value;
        //     var cal = new CashFactory().createAcceptCash(selectMode.value);
        //     var price2 = cal.acceptCash(prices);
        //     proLists = proLists + "商品单价：" + price.value + ";商品数量：" + num.value + ";商品总价：" + prices + ";折后价：" +
        //         price2 + "<br>";
        //     allProPrice = allProPrice + price2;
        //     totalPrice.innerHTML = proLists;
        //     allPrice.innerHTML = allProPrice;
        // }
        // // 策略模式
        // var proLists = ''
        // var allProPrice = 0;
        // button.onclick = function () {
        //     var types=null;
        //     switch(selectMode.value){
        //         case "正常收费":{
        //         types=new ContextCashClass(new NormalCashClass());
        //         break;
        //     };
        //     case "满500反100":{
        //         types=new ContextCashClass(new ReturnCashClass("500","100"));
        //         break;
        //     };
        //     case "打8折":{
        //         types=new ContextCashClass(new RebateCashClass("0.8"));
        //         break;
        //     };
        //     }
        //     var prices = price.value * num.value;
        //     var price2 = types.getResult(prices);
        //     proLists = proLists + "商品单价：" + price.value + ";商品数量：" + num.value + ";商品总价：" + prices + ";折后价：" +
        //         price2 + "<br>";
        //     allProPrice = allProPrice + price2;
        //     totalPrice.innerHTML = proLists;
        //     allPrice.innerHTML = allProPrice;
        // }
        // 策略模式和简单工厂模式结合
        var proLists = ''
        var allProPrice = 0;
        button.onclick = function () {
            var prices = price.value * num.value;
            var price2 = new ContextCashClass(selectMode.value).getResult(prices);
            proLists = proLists + "商品单价：" + price.value + ";商品数量：" + num.value + ";商品总价：" + prices + ";折后价：" +
                price2 + "<br>";
            allProPrice = allProPrice + price2;
            totalPrice.innerHTML = proLists;
            allPrice.innerHTML = allProPrice;
        }
    </script>
</body>

</html>